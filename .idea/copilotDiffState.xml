<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Core/Src/main.c">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Core/Src/main.c" />
              <option name="originalContent" value="/* USER CODE BEGIN Header */&#10;/**&#10;  ******************************************************************************&#10;  * @file           : main.c&#10;  * @brief          : Main program body&#10;  ******************************************************************************&#10;  * @attention&#10;  *&#10;  * Copyright (c) 2025 STMicroelectronics.&#10;  * All rights reserved.&#10;  *&#10;  * This software is licensed under terms that can be found in the LICENSE file&#10;  * in the root directory of this software component.&#10;  * If no LICENSE file comes with this software, it is provided AS-IS.&#10;  *&#10;  ******************************************************************************&#10;  */&#10;/* USER CODE END Header */&#10;/* Includes ------------------------------------------------------------------*/&#10;#include &quot;main.h&quot;&#10;#include &quot;i2c.h&quot;&#10;#include &quot;rtc.h&quot;&#10;#include &quot;usart.h&quot;&#10;#include &quot;gpio.h&quot;&#10;&#10;/* Private includes ----------------------------------------------------------*/&#10;/* USER CODE BEGIN Includes */&#10;#include &lt;stdio.h&gt;&#10;#include &quot;seg_usart.h&quot;&#10;#include &quot;DS3231.h&quot;&#10;&#10;/* Quick notes: to enable float printing with printf, add the linker option&#10;   -u _printf_float. Examples:&#10;&#10;   1) CMake (project-wide)&#10;      set(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -u _printf_float&quot;)&#10;&#10;   2) CMake (target-specific, older CMake)&#10;      set_target_properties(${PROJECT_NAME} PROPERTIES LINK_FLAGS &quot;-u _printf_float&quot;)&#10;&#10;   3) CMake (modern CMake &gt;= 3.13)&#10;      target_link_options(${PROJECT_NAME} PRIVATE &quot;-u _printf_float&quot;)&#10;&#10;   4) STM32CubeIDE / GCC command line:&#10;      Project Properties -&gt; C/C++ Build -&gt; Settings -&gt; MCU GCC Linker -&gt;&#10;      Miscellaneous -&gt; Other linker flags: add exactly:&#10;         -u _printf_float&#10;&#10;   After adding the flag, rebuild. If you also want scanf floats add: -u _scanf_float&#10;&#10;   Note: This flag must be passed to the linker; placing it in CFLAGS (compiler flags) has no effect.&#10;*/&#10;/* USER CODE END Includes */&#10;&#10;/* Private typedef -----------------------------------------------------------*/&#10;/* USER CODE BEGIN PTD */&#10;&#10;/* USER CODE END PTD */&#10;&#10;/* Private define ------------------------------------------------------------*/&#10;/* USER CODE BEGIN PD */&#10;&#10;/* USER CODE END PD */&#10;&#10;/* Private macro -------------------------------------------------------------*/&#10;/* USER CODE BEGIN PM */&#10;&#10;/* USER CODE END PM */&#10;&#10;/* Private variables ---------------------------------------------------------*/&#10;&#10;/* USER CODE BEGIN PV */&#10;&#10;/* USER CODE END PV */&#10;&#10;/* Private function prototypes -----------------------------------------------*/&#10;void SystemClock_Config(void);&#10;/* USER CODE BEGIN PFP */&#10; #ifdef __GNUC__&#10;     #define PUTCHAR_PROTOTYPE int _io_putchar(int ch)&#10; #else&#10;     #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)&#10; #endif /* __GNUC__*/&#10;/* USER CODE END PFP */&#10;&#10;/* Private user code ---------------------------------------------------------*/&#10;/* USER CODE BEGIN 0 */&#10;PUTCHAR_PROTOTYPE&#10;{&#10;  HAL_UART_Transmit(&amp;huart2, (uint8_t *)&amp;ch, 1, HAL_MAX_DELAY);&#10;  return ch;&#10;}&#10;/* USER CODE END 0 */&#10;&#10;/**&#10;  * @brief  The application entry point.&#10;  * @retval int&#10;  */&#10;int main(void)&#10;{&#10;  /* USER CODE BEGIN 1 */&#10;&#10;  /* USER CODE END 1 */&#10;&#10;  /* MCU Configuration--------------------------------------------------------*/&#10;&#10;  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */&#10;  HAL_Init();&#10;&#10;  /* USER CODE BEGIN Init */&#10;&#10;  /* USER CODE END Init */&#10;&#10;  /* Configure the system clock */&#10;  SystemClock_Config();&#10;&#10;  /* USER CODE BEGIN SysInit */&#10;&#10;  /* USER CODE END SysInit */&#10;&#10;  /* Initialize all configured peripherals */&#10;  MX_GPIO_Init();&#10;  MX_RTC_Init();&#10;  MX_USART2_UART_Init();&#10;  MX_I2C2_Init();&#10;  /* USER CODE BEGIN 2 */&#10;  char buf[16] = {0};&#10;&#10;  /* USER CODE END 2 */&#10;&#10;  /* Infinite loop */&#10;  /* USER CODE BEGIN WHILE */&#10;  while (1)&#10;  {&#10;    // seg_show_time();&#10;&#10;    // DS3231_Read_All();&#10;    // DS3231_Read_Time();&#10;    // sprintf(buf,&quot;20%d/%d/%d %d:%d:%d\r\n&quot;,DS3231_Time.year,DS3231_Time.mon,DS3231_Time.date,DS3231_Time.hour,DS3231_Time.min,DS3231_Time.sec);&#10;    // HAL_UART_Transmit(&amp;huart2, (uint8_t *)buf, sizeof(buf), HAL_MAX_DELAY);&#10;    // HAL_Delay(500);&#10;&#10;    /* Print with newline (helps terminals) */&#10;    printf(&quot;ok\r\n&quot;);&#10;    HAL_Delay(1000);&#10;    /* USER CODE END WHILE */&#10;&#10;    /* USER CODE BEGIN 3 */&#10;  }&#10;  /* USER CODE END 3 */&#10;}&#10;&#10;/**&#10;  * @brief System Clock Configuration&#10;  * @retval None&#10;  */&#10;void SystemClock_Config(void)&#10;{&#10;  RCC_OscInitTypeDef RCC_OscInitStruct = {0};&#10;  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};&#10;&#10;  /** Configure the main internal regulator output voltage&#10;  */&#10;  HAL_PWREx_ControlVoltageScaling(PWR_REGULATOR_VOLTAGE_SCALE1);&#10;&#10;  /** Initializes the RCC Oscillators according to the specified parameters&#10;  * in the RCC_OscInitTypeDef structure.&#10;  */&#10;  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI|RCC_OSCILLATORTYPE_LSI;&#10;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;&#10;  RCC_OscInitStruct.HSIDiv = RCC_HSI_DIV1;&#10;  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;&#10;  RCC_OscInitStruct.LSIState = RCC_LSI_ON;&#10;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;&#10;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;&#10;  RCC_OscInitStruct.PLL.PLLM = RCC_PLLM_DIV1;&#10;  RCC_OscInitStruct.PLL.PLLN = 8;&#10;  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;&#10;  RCC_OscInitStruct.PLL.PLLR = RCC_PLLR_DIV2;&#10;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)&#10;  {&#10;    Error_Handler();&#10;  }&#10;&#10;  /** Initializes the CPU, AHB and APB buses clocks&#10;  */&#10;  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK&#10;                              |RCC_CLOCKTYPE_PCLK1;&#10;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;&#10;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;&#10;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;&#10;&#10;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)&#10;  {&#10;    Error_Handler();&#10;  }&#10;}&#10;&#10;/* USER CODE BEGIN 4 */&#10;&#10;/* USER CODE END 4 */&#10;&#10;/**&#10;  * @brief  This function is executed in case of error occurrence.&#10;  * @retval None&#10;  */&#10;void Error_Handler(void)&#10;{&#10;  /* USER CODE BEGIN Error_Handler_Debug */&#10;  /* User can add his own implementation to report the HAL error return state */&#10;  __disable_irq();&#10;  while (1)&#10;  {&#10;  }&#10;  /* USER CODE END Error_Handler_Debug */&#10;}&#10;#ifdef USE_FULL_ASSERT&#10;/**&#10;  * @brief  Reports the name of the source file and the source line number&#10;  *         where the assert_param error has occurred.&#10;  * @param  file: pointer to the source file name&#10;  * @param  line: assert_param error line source number&#10;  * @retval None&#10;  */&#10;void assert_failed(uint8_t *file, uint32_t line)&#10;{&#10;  /* USER CODE BEGIN 6 */&#10;  /* User can add his own implementation to report the file name and line number,&#10;     ex: printf(&quot;Wrong parameters value: file %s on line %d\r\n&quot;, file, line) */&#10;  /* USER CODE END 6 */&#10;}&#10;#endif /* USE_FULL_ASSERT */&#10;" />
              <option name="updatedContent" value="/* USER CODE BEGIN Header */&#10;/**&#10;  ******************************************************************************&#10;  * @file           : main.c&#10;  * @brief          : Main program body&#10;  ******************************************************************************&#10;  * @attention&#10;  *&#10;  * Copyright (c) 2025 STMicroelectronics.&#10;  * All rights reserved.&#10;  *&#10;  * This software is licensed under terms that can be found in the LICENSE file&#10;  * in the root directory of this software component.&#10;  * If no LICENSE file comes with this software, it is provided AS-IS.&#10;  *&#10;  ******************************************************************************&#10;  */&#10;/* USER CODE END Header */&#10;/* Includes ------------------------------------------------------------------*/&#10;#include &quot;main.h&quot;&#10;#include &quot;i2c.h&quot;&#10;#include &quot;rtc.h&quot;&#10;#include &quot;usart.h&quot;&#10;#include &quot;gpio.h&quot;&#10;&#10;/* Private includes ----------------------------------------------------------*/&#10;/* USER CODE BEGIN Includes */&#10;#include &lt;stdio.h&gt;&#10;#include &quot;seg_usart.h&quot;&#10;#include &quot;DS3231.h&quot;&#10;&#10;/* Quick notes: to enable float printing with printf, add the linker option&#10;   -u _printf_float. Examples:&#10;&#10;   1) CMake (project-wide)&#10;      set(CMAKE_EXE_LINKER_FLAGS &quot;${CMAKE_EXE_LINKER_FLAGS} -u _printf_float&quot;)&#10;&#10;   2) CMake (target-specific, older CMake)&#10;      set_target_properties(${PROJECT_NAME} PROPERTIES LINK_FLAGS &quot;-u _printf_float&quot;)&#10;&#10;   3) CMake (modern CMake &gt;= 3.13)&#10;      target_link_options(${PROJECT_NAME} PRIVATE &quot;-u _printf_float&quot;)&#10;&#10;   4) STM32CubeIDE / GCC command line:&#10;      Project Properties -&gt; C/C++ Build -&gt; Settings -&gt; MCU GCC Linker -&gt;&#10;      Miscellaneous -&gt; Other linker flags: add exactly:&#10;         -u _printf_float&#10;&#10;   After adding the flag, rebuild. If you also want scanf floats add: -u _scanf_float&#10;&#10;   Note: This flag must be passed to the linker; placing it in CFLAGS (compiler flags) has no effect.&#10;*/&#10;/* USER CODE END Includes */&#10;&#10;/* Private typedef -----------------------------------------------------------*/&#10;/* USER CODE BEGIN PTD */&#10;&#10;/* USER CODE END PTD */&#10;&#10;/* Private define ------------------------------------------------------------*/&#10;/* USER CODE BEGIN PD */&#10;&#10;/* USER CODE END PD */&#10;&#10;/* Private macro -------------------------------------------------------------*/&#10;/* USER CODE BEGIN PM */&#10;&#10;/* USER CODE END PM */&#10;&#10;/* Private variables ---------------------------------------------------------*/&#10;&#10;/* USER CODE BEGIN PV */&#10;&#10;/* USER CODE END PV */&#10;&#10;/* Private function prototypes -----------------------------------------------*/&#10;void SystemClock_Config(void);&#10;/* USER CODE BEGIN PFP */&#10; #ifdef __GNUC__&#10;     #define PUTCHAR_PROTOTYPE int _io_putchar(int ch)&#10; #else&#10;     #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)&#10; #endif /* __GNUC__*/&#10;/* USER CODE END PFP */&#10;&#10;/* Private user code ---------------------------------------------------------*/&#10;/* USER CODE BEGIN 0 */&#10;PUTCHAR_PROTOTYPE&#10;{&#10;  HAL_UART_Transmit(&amp;huart2, (uint8_t *)&amp;ch, 1, HAL_MAX_DELAY);&#10;  return ch;&#10;}&#10;/* USER CODE END 0 */&#10;&#10;/**&#10;  * @brief  The application entry point.&#10;  * @retval int&#10;  */&#10;int main(void)&#10;{&#10;  /* USER CODE BEGIN 1 */&#10;&#10;  /* USER CODE END 1 */&#10;&#10;  /* MCU Configuration--------------------------------------------------------*/&#10;&#10;  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */&#10;  HAL_Init();&#10;&#10;  /* USER CODE BEGIN Init */&#10;&#10;  /* USER CODE END Init */&#10;&#10;  /* Configure the system clock */&#10;  SystemClock_Config();&#10;&#10;  /* USER CODE BEGIN SysInit */&#10;&#10;  /* USER CODE END SysInit */&#10;&#10;  /* Initialize all configured peripherals */&#10;  MX_GPIO_Init();&#10;  MX_RTC_Init();&#10;  MX_USART2_UART_Init();&#10;  MX_I2C2_Init();&#10;  /* USER CODE BEGIN 2 */&#10;  char buf[16] = {0};&#10;&#10;  /* USER CODE END 2 */&#10;&#10;  /* Infinite loop */&#10;  /* USER CODE BEGIN WHILE */&#10;  while (1)&#10;  {&#10;    // seg_show_time();&#10;&#10;    // DS3231_Read_All();&#10;    // DS3231_Read_Time();&#10;    // sprintf(buf,&quot;20%d/%d/%d %d:%d:%d\r\n&quot;,DS3231_Time.year,DS3231_Time.mon,DS3231_Time.date,DS3231_Time.hour,DS3231_Time.min,DS3231_Time.sec);&#10;    // HAL_UART_Transmit(&amp;huart2, (uint8_t *)buf, sizeof(buf), HAL_MAX_DELAY);&#10;    // HAL_Delay(500);&#10;&#10;    /* Print with newline (helps terminals) */&#10;    printf(&quot;ok\r\n&quot;);&#10;    HAL_Delay(1000);&#10;    /* USER CODE END WHILE */&#10;&#10;    /* USER CODE BEGIN 3 */&#10;  }&#10;  /* USER CODE END 3 */&#10;}&#10;&#10;/**&#10;  * @brief System Clock Configuration&#10;  * @retval None&#10;  */&#10;void SystemClock_Config(void)&#10;{&#10;  RCC_OscInitTypeDef RCC_OscInitStruct = {0};&#10;  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};&#10;&#10;  /** Configure the main internal regulator output voltage&#10;  */&#10;  HAL_PWREx_ControlVoltageScaling(PWR_REGULATOR_VOLTAGE_SCALE1);&#10;&#10;  /** Initializes the RCC Oscillators according to the specified parameters&#10;  * in the RCC_OscInitTypeDef structure.&#10;  */&#10;  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI|RCC_OSCILLATORTYPE_LSI;&#10;  RCC_OscInitStruct.HSIState = RCC_HSI_ON;&#10;  RCC_OscInitStruct.HSIDiv = RCC_HSI_DIV1;&#10;  RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;&#10;  RCC_OscInitStruct.LSIState = RCC_LSI_ON;&#10;  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;&#10;  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;&#10;  RCC_OscInitStruct.PLL.PLLM = RCC_PLLM_DIV1;&#10;  RCC_OscInitStruct.PLL.PLLN = 8;&#10;  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;&#10;  RCC_OscInitStruct.PLL.PLLR = RCC_PLLR_DIV2;&#10;  if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)&#10;  {&#10;    Error_Handler();&#10;  }&#10;&#10;  /** Initializes the CPU, AHB and APB buses clocks&#10;  */&#10;  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK&#10;                              |RCC_CLOCKTYPE_PCLK1;&#10;  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;&#10;  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;&#10;  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;&#10;&#10;  if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)&#10;  {&#10;    Error_Handler();&#10;  }&#10;}&#10;&#10;/* USER CODE BEGIN 4 */&#10;&#10;/* USER CODE END 4 */&#10;&#10;/**&#10;  * @brief  This function is executed in case of error occurrence.&#10;  * @retval None&#10;  */&#10;void Error_Handler(void)&#10;{&#10;  /* USER CODE BEGIN Error_Handler_Debug */&#10;  /* User can add his own implementation to report the HAL error return state */&#10;  __disable_irq();&#10;  while (1)&#10;  {&#10;  }&#10;  /* USER CODE END Error_Handler_Debug */&#10;}&#10;#ifdef USE_FULL_ASSERT&#10;/**&#10;  * @brief  Reports the name of the source file and the source line number&#10;  *         where the assert_param error has occurred.&#10;  * @param  file: pointer to the source file name&#10;  * @param  line: assert_param error line source number&#10;  * @retval None&#10;  */&#10;void assert_failed(uint8_t *file, uint32_t line)&#10;{&#10;  /* USER CODE BEGIN 6 */&#10;  /* User can add his own implementation to report the file name and line number,&#10;     ex: printf(&quot;Wrong parameters value: file %s on line %d\r\n&quot;, file, line) */&#10;  /* USER CODE END 6 */&#10;}&#10;#endif /* USE_FULL_ASSERT */" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>